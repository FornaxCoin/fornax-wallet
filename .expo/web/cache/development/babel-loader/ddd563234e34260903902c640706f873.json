{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactNativeTabView = require(\"react-native-tab-view\");\n\nvar _reactNativeResponsiveScreen = require(\"react-native-responsive-screen\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _client = require(\"@apollo/client\");\n\nvar _query = require(\"../utils/query\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _reactNativeGiftedCharts = require(\"react-native-gifted-charts\");\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _reactNativeSpinkit = _interopRequireDefault(require(\"react-native-spinkit\"));\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Project\\\\qaim\\\\fornax-wallet\\\\src\\\\components\\\\MainTab.tsx\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar styles = _reactNative.StyleSheet.create({\n  titleText: {\n    fontFamily: 'Quicksand-Medium',\n    fontSize: 20,\n    textAlign: 'center'\n  },\n  roundIcon: {\n    height: 60,\n    width: 60,\n    backgroundColor: '#936ee3',\n    borderRadius: 30,\n    marginLeft: 5,\n    marginRight: 20\n  },\n  symbolText: {\n    fontFamily: 'Quicksand-Medium',\n    color: '#363853',\n    fontSize: 18,\n    marginBottom: 4,\n    width: (0, _reactNativeResponsiveScreen.widthPercentageToDP)('35')\n  },\n  descriptionText: {\n    fontFamily: 'Quicksand-Medium',\n    color: '#ffffff',\n    fontSize: 14\n  },\n  minusIcon: {\n    fontFamily: 'Quicksand-Medium',\n    color: '#363853',\n    fontSize: 20,\n    marginRight: 10,\n    paddingBottom: 10\n  },\n  amountText: {\n    fontFamily: 'Quicksand-Medium',\n    color: '#363853',\n    fontSize: 16,\n    paddingTop: 5\n  },\n  scrollTable: {\n    flex: 1\n  },\n  noTxnText: {\n    fontFamily: 'Quicksand-Medium',\n    color: '#ffffff',\n    fontSize: 14,\n    textAlign: 'center',\n    marginTop: 20\n  },\n  footerBox: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginTop: 10,\n    marginBottom: 5\n  },\n  incomeText: {\n    fontSize: 14,\n    fontFamily: 'Quicksand-Medium',\n    marginRight: 20,\n    color: '#936ee3'\n  },\n  outcomeText: {\n    fontSize: 14,\n    fontFamily: 'Quicksand-Medium',\n    color: 'gray'\n  },\n  roundBox: {\n    height: 10,\n    width: 10,\n    borderRadius: 30,\n    marginRight: 5\n  }\n});\n\nvar _renderItem = function renderItem(_ref, web3, defaultAddress, accounts) {\n  var _web3$utils;\n\n  var item = _ref.item;\n\n  var getAccountName = function getAccountName() {\n    var found = accounts.length > 0 && accounts.findIndex(function (acc) {\n      return acc.address.toLowerCase() === (item == null ? void 0 : item.to.toLowerCase());\n    });\n\n    if (found !== -1) {\n      return 'Account ' + (found + 1);\n    } else {\n      return item == null ? void 0 : item.to;\n    }\n  };\n\n  return React.createElement(_reactNative.View, {\n    style: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      marginBottom: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, React.createElement(_reactNative.View, {\n    style: {\n      flexDirection: 'row'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, React.createElement(_reactNative.View, {\n    style: [styles.roundIcon, {\n      backgroundColor: '#4368c7'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }), React.createElement(_reactNative.View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, React.createElement(_reactNative.Text, {\n    style: styles.symbolText,\n    numberOfLines: 1,\n    ellipsizeMode: \"middle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, getAccountName()), React.createElement(_reactNative.Text, {\n    style: styles.descriptionText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, \"Income\"))), React.createElement(_reactNative.View, {\n    style: {\n      flexDirection: 'row',\n      alignSelf: 'center',\n      width: 120\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, defaultAddress && defaultAddress === (item == null ? void 0 : item.from) ? React.createElement(_reactNative.Text, {\n    style: [styles.minusIcon, {\n      color: '#ff3333'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, \"-\") : React.createElement(_reactNative.Text, {\n    style: [styles.minusIcon, {\n      color: '#52e34f'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, \"+\"), React.createElement(_reactNative.Text, {\n    style: styles.amountText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, \" $ \", web3 && parseFloat(web3 == null ? void 0 : (_web3$utils = web3.utils) == null ? void 0 : _web3$utils.fromWei(item.value)).toFixed(2))));\n};\n\nvar TransactionList = function TransactionList() {\n  var _useState = (0, React.useState)(true),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      loader = _useState2[0],\n      setLoader = _useState2[1];\n\n  var _useState3 = (0, React.useState)(4),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      pageLimit = _useState4[0],\n      setPageLimit = _useState4[1];\n\n  var _useState5 = (0, React.useState)(0),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      offset = _useState6[0],\n      setOffset = _useState6[1];\n\n  var _useState7 = (0, React.useState)([]),\n      _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n      txnList = _useState8[0],\n      setTxnList = _useState8[1];\n\n  var _useSelector = (0, _reactRedux.useSelector)(function (_ref2) {\n    var wallet = _ref2.wallet;\n    return {\n      web3: wallet == null ? void 0 : wallet.web3,\n      defaultAddress: wallet == null ? void 0 : wallet.defaultAddress,\n      accounts: wallet == null ? void 0 : wallet.accounts\n    };\n  }),\n      web3 = _useSelector.web3,\n      defaultAddress = _useSelector.defaultAddress,\n      accounts = _useSelector.accounts;\n\n  var _useLazyQuery = (0, _client.useLazyQuery)(_query.GET_TRANSACTIONS_BY_ADDRESS, {\n    errorPolicy: 'all'\n  }),\n      _useLazyQuery2 = (0, _slicedToArray2.default)(_useLazyQuery, 2),\n      getTxnList = _useLazyQuery2[0],\n      _useLazyQuery2$ = _useLazyQuery2[1],\n      loading = _useLazyQuery2$.loading,\n      error = _useLazyQuery2$.error,\n      data = _useLazyQuery2$.data,\n      fetchMore = _useLazyQuery2$.fetchMore;\n\n  (0, React.useEffect)(function () {\n    setTxnList([]);\n    setLoader(true);\n    defaultAddress && getTxnList({\n      variables: {\n        offset: offset,\n        limit: pageLimit,\n        address: defaultAddress,\n        sortBy: 'DATE'\n      }\n    });\n  }, [defaultAddress]);\n  (0, React.useEffect)(function () {\n    setOffset(0);\n\n    if (error) {\n      setLoader(false);\n      console.log(error, \"Transction list Error\");\n    }\n\n    if (data) {\n      var _data$transactionsByA, _data$transactionsByA2, _data$transactionsByA3;\n\n      setLoader(false);\n      (data == null ? void 0 : (_data$transactionsByA = data.transactionsByAddressWithPagination) == null ? void 0 : (_data$transactionsByA2 = _data$transactionsByA.transactions) == null ? void 0 : _data$transactionsByA2.length) > 0 && setTxnList((0, _toConsumableArray2.default)(_lodash.default.uniqBy(data == null ? void 0 : (_data$transactionsByA3 = data.transactionsByAddressWithPagination) == null ? void 0 : _data$transactionsByA3.transactions, 'id')));\n    }\n  }, [data, loading]);\n\n  var handleFetchMore = function handleFetchMore() {\n    defaultAddress && getTxnList({\n      variables: {\n        offset: offset + 1,\n        limit: pageLimit + pageLimit,\n        address: defaultAddress,\n        sortBy: 'DATE'\n      }\n    });\n    setOffset(offset + 1);\n    setPageLimit(pageLimit + pageLimit);\n  };\n\n  return React.createElement(_reactNative.View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      backgroundColor: 'transparent',\n      marginTop: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 5\n    }\n  }, React.createElement(_reactNativeSpinkit.default, {\n    isVisible: loader,\n    size: 50,\n    type: '9CubeGrid',\n    color: \"#b27f29\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  }), !loader && (txnList.length > 0 ? React.createElement(_reactNative.FlatList, {\n    data: txnList,\n    renderItem: function renderItem(item) {\n      return _renderItem(item, web3, defaultAddress, accounts);\n    },\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    onEndReachedThreshold: 0.5,\n    onEndReached: handleFetchMore,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }\n  }) : React.createElement(_reactNative.Text, {\n    style: styles.noTxnText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, \"No Transactions Found\")));\n};\n\nvar SavingTxnList = function SavingTxnList() {\n  var _useState9 = (0, React.useState)([]),\n      _useState10 = (0, _slicedToArray2.default)(_useState9, 2),\n      txnList = _useState10[0],\n      setTxnList = _useState10[1];\n\n  var _useState11 = (0, React.useState)(true),\n      _useState12 = (0, _slicedToArray2.default)(_useState11, 2),\n      loader = _useState12[0],\n      setLoader = _useState12[1];\n\n  var _useSelector2 = (0, _reactRedux.useSelector)(function (_ref3) {\n    var wallet = _ref3.wallet;\n    return {\n      defaultAddress: wallet == null ? void 0 : wallet.defaultAddress,\n      web3: wallet == null ? void 0 : wallet.web3\n    };\n  }),\n      defaultAddress = _useSelector2.defaultAddress,\n      web3 = _useSelector2.web3;\n\n  var _useLazyQuery3 = (0, _client.useLazyQuery)(_query.GET_TRANSACTIONS_BY_MONTH),\n      _useLazyQuery4 = (0, _slicedToArray2.default)(_useLazyQuery3, 2),\n      getTxnByMonth = _useLazyQuery4[0],\n      _useLazyQuery4$ = _useLazyQuery4[1],\n      loading = _useLazyQuery4$.loading,\n      error = _useLazyQuery4$.error,\n      data = _useLazyQuery4$.data;\n\n  (0, React.useEffect)(function () {\n    setTxnList([]);\n    setLoader(true);\n    defaultAddress && getTxnByMonth({\n      variables: {\n        address: defaultAddress\n      }\n    });\n  }, [defaultAddress]);\n  (0, React.useEffect)(function () {\n    if (error) {\n      setLoader(false);\n      console.log(error, \"Saving list Error\");\n    }\n\n    if (data) {\n      var _data$transactionsByM, _data$transactionsByM2, _data$transactionsByM3;\n\n      setTxnList([]);\n      var newData = (data == null ? void 0 : (_data$transactionsByM = data.transactionsByMonth) == null ? void 0 : _data$transactionsByM.length) > 0 && (data == null ? void 0 : data.transactionsByMonth.slice((data == null ? void 0 : (_data$transactionsByM2 = data.transactionsByMonth) == null ? void 0 : _data$transactionsByM2.length) - 6, data == null ? void 0 : (_data$transactionsByM3 = data.transactionsByMonth) == null ? void 0 : _data$transactionsByM3.length));\n      var FilterTxns = (newData == null ? void 0 : newData.length) > 0 && (newData == null ? void 0 : newData.reduce(function (newtxn, txn) {\n        newtxn.push({\n          value: parseInt(web3.utils.fromWei(txn.fromTotal, 'ether'), 10),\n          label: _moment.default.unix(txn.month).format('MMM'),\n          spacing: 2,\n          labelWidth: 30,\n          labelTextStyle: {\n            color: 'gray'\n          },\n          frontColor: '#363853'\n        }, {\n          value: parseInt(web3.utils.fromWei(txn.toTotal, 'ether'), 10),\n          frontColor: '#936ee3'\n        });\n        return newtxn;\n      }, []));\n      setLoader(false);\n      FilterTxns.length > 0 && setTxnList(FilterTxns);\n    }\n  }, [data, loading]);\n  return React.createElement(_reactNative.View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      backgroundColor: 'transparent',\n      marginTop: 5,\n      marginBottom: 20,\n      marginLeft: -20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 5\n    }\n  }, React.createElement(_reactNativeSpinkit.default, {\n    isVisible: loader,\n    size: 50,\n    type: '9CubeGrid',\n    color: \"#b27f29\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }\n  }), React.createElement(_reactNative.View, {\n    style: {\n      marginBottom: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }\n  }, !loader && txnList.length > 0 && React.createElement(_reactNativeGiftedCharts.BarChart, {\n    data: txnList,\n    barWidth: 10,\n    spacing: 24,\n    roundedTop: true,\n    roundedBottom: true,\n    hideRules: true,\n    hideAxesAndRules: true,\n    xAxisThickness: 0,\n    yAxisThickness: 0,\n    yAxisTextStyle: {\n      color: 'gray'\n    },\n    noOfSections: 3,\n    width: (0, _reactNativeResponsiveScreen.widthPercentageToDP)('90'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  })), React.createElement(_reactNative.View, {\n    style: styles.footerBox,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }\n  }, React.createElement(_reactNative.View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 9\n    }\n  }, React.createElement(_reactNative.View, {\n    style: [styles.roundBox, {\n      backgroundColor: '#936ee3'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 11\n    }\n  }), React.createElement(_reactNative.Text, {\n    style: styles.incomeText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 11\n    }\n  }, \"Income\")), React.createElement(_reactNative.View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 9\n    }\n  }, React.createElement(_reactNative.View, {\n    style: [styles.roundBox, {\n      backgroundColor: '#363853'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 11\n    }\n  }), React.createElement(_reactNative.Text, {\n    style: styles.outcomeText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 11\n    }\n  }, \"Outcome\"))));\n};\n\nvar renderScene = (0, _reactNativeTabView.SceneMap)({\n  transaction: TransactionList,\n  savings: SavingTxnList\n});\n\nvar MainTab = function MainTab() {\n  var layout = (0, _reactNative.useWindowDimensions)();\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      index = _React$useState2[0],\n      setIndex = _React$useState2[1];\n\n  var _React$useState3 = React.useState([{\n    key: 'transaction',\n    title: 'Transactions'\n  }, {\n    key: 'savings',\n    title: 'Savings'\n  }]),\n      _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 1),\n      routes = _React$useState4[0];\n\n  var renderTabBar = function renderTabBar(props) {\n    return React.createElement(_reactNativeTabView.TabBar, (0, _extends2.default)({}, props, {\n      activeColor: '#ffffff',\n      inactiveColor: '#363853',\n      renderLabel: function renderLabel(_ref4) {\n        var route = _ref4.route,\n            color = _ref4.color;\n\n        if (route.key === 'transaction') {\n          return React.createElement(_reactNative.Text, {\n            style: [styles.titleText, {\n              width: 260,\n              color: color\n            }],\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 13\n            }\n          }, route.title);\n        } else {\n          return React.createElement(_reactNative.Text, {\n            style: [styles.titleText, {\n              color: color\n            }],\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 13\n            }\n          }, route.title);\n        }\n      },\n      indicatorStyle: {\n        backgroundColor: '#5671ff',\n        width: 20,\n        height: 4,\n        marginHorizontal: 70,\n        marginTop: 30\n      },\n      style: {\n        backgroundColor: 'transparent'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 5\n      }\n    }));\n  };\n\n  return React.createElement(_reactNativeTabView.TabView, {\n    renderTabBar: renderTabBar,\n    navigationState: {\n      index: index,\n      routes: routes\n    },\n    renderScene: renderScene,\n    onIndexChange: setIndex,\n    initialLayout: {\n      width: layout.width\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 5\n    }\n  });\n};\n\nvar _default = MainTab;\nexports.default = _default;","map":{"version":3,"sources":["D:/Project/qaim/fornax-wallet/src/components/MainTab.tsx"],"names":["styles","StyleSheet","create","titleText","fontFamily","fontSize","textAlign","roundIcon","height","width","backgroundColor","borderRadius","marginLeft","marginRight","symbolText","color","marginBottom","descriptionText","minusIcon","paddingBottom","amountText","paddingTop","scrollTable","flex","noTxnText","marginTop","footerBox","flexDirection","justifyContent","incomeText","outcomeText","roundBox","renderItem","web3","defaultAddress","accounts","item","getAccountName","found","length","findIndex","acc","address","toLowerCase","to","alignSelf","from","parseFloat","utils","fromWei","value","toFixed","TransactionList","loader","setLoader","pageLimit","setPageLimit","offset","setOffset","txnList","setTxnList","wallet","GET_TRANSACTIONS_BY_ADDRESS","errorPolicy","getTxnList","loading","error","data","fetchMore","variables","limit","sortBy","console","log","transactionsByAddressWithPagination","transactions","_","uniqBy","handleFetchMore","alignItems","id","SavingTxnList","GET_TRANSACTIONS_BY_MONTH","getTxnByMonth","newData","transactionsByMonth","slice","FilterTxns","reduce","newtxn","txn","push","parseInt","fromTotal","label","moment","unix","month","format","spacing","labelWidth","labelTextStyle","frontColor","toTotal","renderScene","transaction","savings","MainTab","layout","React","useState","index","setIndex","key","title","routes","renderTabBar","props","route","marginHorizontal"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  useWindowDimensions,\r\n  Text,\r\n  StyleSheet,\r\n  FlatList,\r\n} from 'react-native';\r\nimport { TabView, SceneMap, TabBar } from 'react-native-tab-view';\r\nimport {\r\n  // heightPercentageToDP as hp,\r\n  widthPercentageToDP as wp,\r\n} from 'react-native-responsive-screen';\r\nimport _ from 'lodash';\r\nimport { useLazyQuery } from '@apollo/client';\r\nimport { GET_TRANSACTIONS_BY_ADDRESS, GET_TRANSACTIONS_BY_MONTH } from '../utils/query';\r\nimport { useSelector } from 'react-redux';\r\nimport { BarChart } from \"react-native-gifted-charts\";\r\nimport moment from 'moment';\r\nimport Spinner from 'react-native-spinkit';\r\n\r\nconst styles = StyleSheet.create({\r\n  titleText: {\r\n    fontFamily: 'Quicksand-Medium',\r\n    fontSize: 20,\r\n    textAlign: 'center',\r\n  },\r\n  roundIcon: {\r\n    height: 60,\r\n    width: 60,\r\n    backgroundColor: '#936ee3',\r\n    borderRadius: 30,\r\n    marginLeft: 5,\r\n    marginRight: 20,\r\n  },\r\n  symbolText: {\r\n    fontFamily: 'Quicksand-Medium',\r\n    color: '#363853',\r\n    fontSize: 18,\r\n    marginBottom: 4,\r\n    width: wp('35'),\r\n  },\r\n  descriptionText: {\r\n    fontFamily: 'Quicksand-Medium',\r\n    color: '#ffffff',\r\n    fontSize: 14,\r\n  },\r\n  minusIcon: {\r\n    fontFamily: 'Quicksand-Medium',\r\n    color: '#363853',\r\n    fontSize: 20,\r\n    marginRight: 10,\r\n    paddingBottom: 10,\r\n  },\r\n  amountText: {\r\n    fontFamily: 'Quicksand-Medium',\r\n    color: '#363853',\r\n    fontSize: 16,\r\n    paddingTop: 5,\r\n  },\r\n  scrollTable: {\r\n    flex: 1,\r\n  },\r\n  noTxnText: {\r\n    fontFamily: 'Quicksand-Medium',\r\n    color: '#ffffff',\r\n    fontSize: 14,\r\n    textAlign: 'center',\r\n    marginTop: 20,\r\n  },\r\n  footerBox: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    marginTop: 10,\r\n    marginBottom: 5\r\n  },\r\n  incomeText: {\r\n    fontSize: 14,\r\n    fontFamily: 'Quicksand-Medium',\r\n    marginRight: 20,\r\n    color: '#936ee3',\r\n  },\r\n  outcomeText: {\r\n    fontSize: 14,\r\n    fontFamily: 'Quicksand-Medium',\r\n    color: 'gray',\r\n  },\r\n  roundBox: {\r\n    height: 10,\r\n    width: 10,\r\n    borderRadius: 30,\r\n    marginRight: 5\r\n  }\r\n});\r\n\r\nconst renderItem = ({ item }: any, web3: any, defaultAddress: any, accounts: any) => {\r\n  const getAccountName = () => {\r\n    const found = accounts.length > 0 && accounts.findIndex((acc: any) => acc.address.toLowerCase() === item?.to.toLowerCase());\r\n    if(found !== -1) {\r\n      return 'Account '+(found + 1);\r\n    } else {\r\n      return item?.to;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <View\r\n      style={{\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        marginBottom: 20,\r\n      }}>\r\n      <View style={{ flexDirection: 'row' }}>\r\n        <View style={[styles.roundIcon, { backgroundColor: '#4368c7' }]} />\r\n        <View>\r\n          <Text \r\n            style={styles.symbolText}\r\n            numberOfLines={1}\r\n            ellipsizeMode=\"middle\"\r\n          >{getAccountName()}</Text>\r\n          <Text style={styles.descriptionText}>Income</Text>\r\n        </View>\r\n      </View>\r\n      <View style={{ flexDirection: 'row', alignSelf: 'center', width: 120 }}>\r\n        {defaultAddress && defaultAddress === item?.from ? (\r\n          <Text style={[styles.minusIcon, { color: '#ff3333' }]}>-</Text>\r\n        ):(\r\n          <Text style={[styles.minusIcon, { color: '#52e34f' }]}>+</Text>\r\n        )}\r\n        <Text style={styles.amountText}> $ {web3 && parseFloat(web3?.utils?.fromWei(item.value)).toFixed(2)}</Text>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst TransactionList = () => {\r\n  const [loader, setLoader] = useState(true)\r\n  const [pageLimit, setPageLimit] = useState(4);\r\n  const [offset, setOffset] = useState(0);\r\n  const [txnList, setTxnList] = useState<any>([]);\r\n\r\n  const { web3, defaultAddress, accounts } = useSelector(({ wallet }: any) => {\r\n    return {\r\n      web3: wallet?.web3,\r\n      defaultAddress: wallet?.defaultAddress,\r\n      accounts: wallet?.accounts,\r\n    };\r\n  });\r\n\r\n  const [getTxnList, { loading, error, data, fetchMore }] = useLazyQuery(GET_TRANSACTIONS_BY_ADDRESS, { errorPolicy: 'all' });\r\n\r\n  useEffect(() => {\r\n    setTxnList([]);\r\n    setLoader(true);\r\n    defaultAddress && getTxnList({\r\n      variables: {\r\n        offset,\r\n        limit: pageLimit,\r\n        address: defaultAddress,\r\n        sortBy: 'DATE',\r\n      },\r\n    })\r\n  }, [defaultAddress])\r\n\r\n  useEffect(() => {\r\n    setOffset(0);\r\n    if (error) {\r\n      setLoader(false);\r\n      console.log(error, \"Transction list Error\");\r\n    }\r\n    if (data) {\r\n      setLoader(false);\r\n      data?.transactionsByAddressWithPagination?.transactions?.length > 0 && \r\n      setTxnList([..._.uniqBy(data?.transactionsByAddressWithPagination?.transactions, 'id')]);\r\n    }\r\n  }, [data, loading]);\r\n\r\n  const handleFetchMore = () => {\r\n    defaultAddress && getTxnList({\r\n      variables: {\r\n        offset: offset + 1,\r\n        limit: pageLimit + pageLimit,\r\n        address: defaultAddress,\r\n        sortBy: 'DATE',\r\n      },\r\n    })\r\n    setOffset(offset + 1);\r\n    setPageLimit(pageLimit + pageLimit);\r\n  }\r\n\r\n  return (\r\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', backgroundColor: 'transparent', marginTop: 15 }}>\r\n      <Spinner isVisible={loader} size={50} type={'9CubeGrid'} color=\"#b27f29\"/>\r\n      {!loader && ( txnList.length > 0 ? (\r\n        <FlatList\r\n          data={txnList}\r\n          renderItem={(item) => renderItem(item, web3, defaultAddress, accounts)}\r\n          keyExtractor={item => item.id}\r\n          onEndReachedThreshold={0.5}\r\n          onEndReached={handleFetchMore}\r\n        />\r\n      ) : (\r\n        <Text style={styles.noTxnText}>No Transactions Found</Text>\r\n      ))}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst SavingTxnList = () => {\r\n  const [txnList, setTxnList] = useState<any>([]);\r\n  const [loader, setLoader] = useState(true)\r\n  const { defaultAddress, web3 } = useSelector(({ wallet }: any) => {\r\n    return {\r\n      defaultAddress: wallet?.defaultAddress,\r\n      web3: wallet?.web3,\r\n    };\r\n  });\r\n\r\n  const [getTxnByMonth, { loading, error, data }] = useLazyQuery(GET_TRANSACTIONS_BY_MONTH);\r\n\r\n  useEffect(() => {\r\n    setTxnList([]);\r\n    setLoader(true);\r\n    defaultAddress && getTxnByMonth({\r\n      variables: {\r\n        address: defaultAddress,\r\n      },\r\n    })\r\n  }, [defaultAddress])\r\n\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      setLoader(false);\r\n      console.log(error, \"Saving list Error\");\r\n    }\r\n    if (data) {\r\n      setTxnList([]);\r\n      const newData = data?.transactionsByMonth?.length > 0 && data?.transactionsByMonth.slice(data?.transactionsByMonth?.length - 6, data?.transactionsByMonth?.length)\r\n      const FilterTxns = newData?.length > 0 && newData?.reduce((newtxn: any, txn: any) => {\r\n        newtxn.push({\r\n          value: parseInt(web3.utils.fromWei(txn.fromTotal, 'ether'), 10),\r\n          label: moment.unix(txn.month).format('MMM'),\r\n          spacing: 2,\r\n          labelWidth: 30,\r\n          labelTextStyle: {color: 'gray'},\r\n          frontColor: '#363853',\r\n        }, {\r\n          value: parseInt(web3.utils.fromWei(txn.toTotal, 'ether'), 10),\r\n          frontColor: '#936ee3',\r\n        })      \r\n        return newtxn;\r\n      }, []);\r\n      setLoader(false);\r\n      FilterTxns.length > 0 && setTxnList(FilterTxns);\r\n    }\r\n  }, [data, loading]);\r\n\r\n  return (\r\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', backgroundColor: 'transparent', marginTop: 5, marginBottom: 20, marginLeft: -20 }}>\r\n      <Spinner isVisible={loader} size={50} type={'9CubeGrid'} color=\"#b27f29\"/>\r\n      <View style={{ marginBottom: 15 }}>\r\n        {!loader && txnList.length > 0 && \r\n          <BarChart\r\n            data={txnList}\r\n            barWidth={10}\r\n            spacing={24}\r\n            roundedTop\r\n            roundedBottom\r\n            hideRules\r\n            hideAxesAndRules\r\n            xAxisThickness={0}\r\n            yAxisThickness={0}\r\n            yAxisTextStyle={{color: 'gray'}}\r\n            noOfSections={3}\r\n            width={wp('90')}\r\n          />\r\n        }\r\n      </View>\r\n      <View style={styles.footerBox}>\r\n        <View style={{ flexDirection: 'row', alignItems: 'center' }}>\r\n          <View style={[styles.roundBox, { backgroundColor: '#936ee3' }]} />\r\n          <Text style={styles.incomeText}>Income</Text>\r\n        </View>\r\n        <View style={{ flexDirection: 'row', alignItems: 'center' }}>\r\n          <View style={[styles.roundBox, { backgroundColor: '#363853' }]} />\r\n          <Text style={styles.outcomeText}>Outcome</Text>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst renderScene = SceneMap({\r\n  transaction: TransactionList,\r\n  savings: SavingTxnList,\r\n});\r\n\r\nconst MainTab = () => {\r\n  const layout = useWindowDimensions();\r\n\r\n  const [index, setIndex] = React.useState(0);\r\n  const [routes] = React.useState([\r\n    { key: 'transaction', title: 'Transactions' },\r\n    { key: 'savings', title: 'Savings' },\r\n  ]);\r\n\r\n  const renderTabBar = (props: any) => (\r\n    <TabBar\r\n      {...props}\r\n      activeColor={'#ffffff'}\r\n      inactiveColor={'#363853'}\r\n      renderLabel={({ route, color }) => {\r\n        if (route.key === 'transaction') {\r\n          return (\r\n            <Text style={[styles.titleText, { width: 260, color }]}>\r\n              {route.title}\r\n            </Text>\r\n          );\r\n        } else {\r\n          return (\r\n            <Text style={[styles.titleText, { color }]}>{route.title}</Text>\r\n          );\r\n        }\r\n      }}\r\n      indicatorStyle={{\r\n        backgroundColor: '#5671ff',\r\n        width: 20,\r\n        height: 4,\r\n        marginHorizontal: 70,\r\n        marginTop: 30,\r\n      }}\r\n      style={{\r\n        backgroundColor: 'transparent',\r\n      }}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <TabView\r\n      renderTabBar={renderTabBar}\r\n      navigationState={{ index, routes }}\r\n      renderScene={renderScene}\r\n      onIndexChange={setIndex}\r\n      initialLayout={{ width: layout.width }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default MainTab;\r\n"]},"metadata":{},"sourceType":"script"}